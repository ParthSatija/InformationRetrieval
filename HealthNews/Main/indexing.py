# coding=utf-8
from urllib2 import urlopen

from HealthNews.Utility.MySQL import MySQL

from HealthNews.Main.lemmatization import lemmatization
import pysolr, os, json, sys
import simplejson
from nltk.corpus import wordnet as wn
from itertools import chain


class Indexing(object):
    def __init__(self):
        self.solr = pysolr.Solr('http://localhost:8983/solr/test', timeout=10)
        self.lem = lemmatization()
        self.resplst = set()
        database_name = "cz4034"
        table_name = "CZ4034_Original"
        self.mysql_object = MySQL()
        self.mysql_object.use_database(database_name)

    def delete_index(self):
        # Delete existing indexed json files in solr
        self.solr.delete(q='*:*')

    def send_file_to_Solr(self, data):
        for j in range(len(data["response"]["docs"])):
            jsondata = {}
            current_response = data["response"]["docs"][j]
            DocId = current_response["_id"].lower()
            jsondata["docID"] = DocId
            # checking if news desk exists
            if ('news_desk' in current_response and current_response["news_desk"] is not None):
                jsondata["news_desk"] = " ".join(
                    self.lem.lemmatizeWord(self.lem.removeStopWords(current_response["news_desk"].lower().split(" "))))

            # checking if print headline and main headline exists
            if ('headline' in current_response and current_response["headline"] is not None):
                k = current_response["headline"]
                d = dict()
                for key, value in k.iteritems():
                    d[" ".join(self.lem.lemmatizeWord(self.lem.removeStopWords(key.lower().split(" "))))] = " ".join(
                        self.lem.lemmatizeWord(self.lem.removeStopWords(value.lower().split())))
                jsondata['headline'] = d

                # checking if lead paragraph exists
            if ('lead_paragraph' in current_response and current_response["lead_paragraph"] is not None):
                jsondata["lead_paragraph"] = " ".join(self.lem.lemmatizeWord(
                    self.lem.removeStopWords(current_response["lead_paragraph"][0:1000].lower().split())))

            if ('keywords' in current_response and current_response["keywords"] is not None):
                k = current_response["keywords"]
                l = []
                for x in k:
                    d = dict()
                    for key, v in x.iteritems():
                        d[" ".join(self.lem.lemmatizeWord(key.lower().split(" ")))] = " ".join(
                            self.lem.lemmatizeWord(v.lower().split(" ")))
                        # d.add(key.lower(), v.lower())
                    l.append(d)
                jsondata["keywords"] = l
            if ('multimedia' in current_response and current_response["multimedia"] is not None):
                jsondata["multimedia"] = "true"
            else:
                jsondata["multimedia"] = "false"
            print jsondata
            self.solr.add([jsondata])
        self.solr.commit()

    def exec_query(self, url):
        print ""
        conn = urlopen(url)
        rsp = simplejson.load(conn)
        print rsp
        for result in rsp["response"]["docs"]:
            print(result)
            self.resplst.add(result["docID"][0])

    def search(self, query, image):
        if(image == "false"):
            image=""
        else:
            image="image=true"
        # Lemmatized query list
        queryLst = self.lem.lemmatizeWord(self.lem.removeStopWords(query.lower().split(" ")))
        main_url = "http://localhost:8983/solr/test/select?q="+image
        ##keyword + headline AND #############################

        url = main_url

        for word in queryLst:
            url += "%2Bheadline:*\:*" + word + "*+" + "%2Bkeywords:*\:*" + word + "*+"
            # url+="%2Bheadline:*\:*" + word[0].upper() + word[1:] + "*+" + "%2Bkeywords:*\:*" + word[0].upper() + word[1:] + "*+"

        url = url[:-1]
        url += "&wt=json&rows=15"
        print "url: " + url
        self.exec_query(url)

        # keyword AND search#############################

        url = main_url
        for word in queryLst:
            url += "%2Bkeywords:*\:*" + word + "*+"
            # url+="%2Bkeywords:*\:*" + word[0].upper() + word[1:] + "*+"
        url = url[:-1]
        url += "&wt=json&rows=15"
        print "url: " + url
        self.exec_query(url)

        ##headline AND search #############################
        url = main_url
        for word in queryLst:
            url += "%2Bheadline:*\:*" + word + "*+"
            # url+="%2Bheadline:*\:*" + word[0].upper() + word[1:] + "*+"

        url = url[:-1]
        url += "&wt=json&rows=15"
        print "url: " + url
        self.exec_query(url)

        ##leadParagragh AND search #############################

        url = main_url
        for word in queryLst:
            url += "%2Blead_paragraph:*" + word + "*+"
            # url+="%2Blead_paragraph:*\:*" + word[0].upper() + word[1:] + "*+"

        url = url[:-1]
        url += "&wt=json&rows=15"
        print "url: " + url
        self.exec_query(url)

        ##keyword + headline+ lead_paragraph+news_desk OR #############################

        url = main_url

        for word in queryLst:
            url += "headline:*\:*" + word + "*+" + "keywords:*\:*" + word + "*+" + "lead_paragraph:*" + word + "*+" + "news_desk:*" + word + "*+"
            # url+="headline:*\:*" + word[0].upper() + word[1:] + "*+" + "keywords:*\:*" + word[0].upper() + word[1:] + "*+" + "lead_paragraph:*" + word[0].upper() + word[1:]  + "*+" + "news_desk:*" + word[0].upper() + word[1:]  +"*+"

        url = url[:-1]
        url += "&wt=json&rows=15"
        print "url: " + url
        self.exec_query(url)

        ##phrase search in headline #############################

        url = "http://localhost:8983/solr/test/select?q=headline:*\:\""+image
        for word in queryLst:
            url += word + "+"
            # url+=word[0].upper() + word[1:] + "+"

        url = url[:-1]
        url += "\"&wt=json&rows=15"
        print "url: " + url
        self.exec_query(url)

        ##phrase search in lead_paragraph #############################

        url = "http://localhost:8983/solr/test/select?q=lead_paragraph:\""+image
        for word in queryLst:
            url += word + "+"
            # url+=word[0].upper() + word[1:] + "+"

        url = url[:-1]
        url += "\"&wt=json&rows=15"
        print "url: " + url
        self.exec_query(url)

        ## SYNONYM headline OR search


        print "New list"
        for item in queryLst:
            synonyms = wn.synsets(item)
            lst = set(chain.from_iterable([word.lemma_names() for word in synonyms]))

            url = main_url
            for word in lst:
                url += "%2Bheadline:*\:*" + word + "*+"
                # url+="headline:*\:*" + word[0].upper() + word[1:] + "*+"

            url = url[:-1]
            url += "&wt=json&rows=15"
            print "url: " + url
            self.exec_query(url)

            # Return data from db for the list of docIDs of relevant documents
            return self.get_data_from_db(self.resplst)

    def get_data_from_db(self, resplst):
        doc_ids = ""
        for item in resplst:
            doc_ids = doc_ids + "'" + item + "',"
        doc_ids = doc_ids[:-1]
        sql = "select typeOfMaterial, word_count, publication_date, printheadline, headline, lead_paragraph, web_url, image_url from cz4034_original where docID in (" + doc_ids + ");"
        # sql = "select typeOfMaterial, word_count, publication_date, headline, lead_paragraph from cz4034_original where docID in (" + doc_ids + ");"
        print sql
        data = self.mysql_object.execute_query(sql)
        dict = {}
        res = []
        for record in data:
            dict = {}
            type_of_material = record[0]
            word_count = record[1]
            pub_date = record[2][0:10]
            printheadline = record[3]
            headline = record[4]
            lead_paragraph = record[5]
            web_url = record[6]
            image_url = record[7]
            dict["type_of_material"] = type_of_material
            dict["word_count"] = word_count
            dict["pub_date"] = pub_date
            dict["printheadline"] = printheadline
            dict["headline"] = headline
            dict["lead_paragraph"] = lead_paragraph
            dict["web_url"] = web_url
            dict["image_url"] = image_url
            res.append(dict)
        print res
        d = {}
        d["docs"] = res
        return d
        # with open(os.getcwd() + "/query.json", 'w') as jsonFile:
        #     json_data = json.dump(d, jsonFile)
        #     print json.dumps(d, sort_keys=True,
        #     indent = 4, separators = (',', ': '))
        #     return d
        # with open(os.getcwd() + "/query.json", 'r') as jsonFile:
        #     return json.load(jsonFile)

    # def image_search(self, query):
    #     return '{"response": {"docs": [{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Article", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Article", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "1934-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "23067456", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "1934-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "1934-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "23067456", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "1934-01-13T11:37:12Z"}]}}'
    #
    def test_search(self, query):
        #return '{"docs": [{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Article", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "2015-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "230", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "1934-01-13T11:37:12Z"},{"type_of_material": "Blog", "lead_paragraph": null, "headline": {"main": "Many Who Take a Daily Aspirin Don\'t Need It", "print_headline": "Prevention: An Overuse of Daily Aspirin"}, "abstract": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "word_count": "23067456", "_id": "54b54a34798810566ec1ad9d", "snippet": "Many healthy people take a daily aspirin to reduce the risk of heart disease and stroke, but a new study has found that more than 11 percent of them should not be doing so.", "web_url": "http://well.blogs.nytimes.com/2015/01/13/many-who-take-a-daily-aspirin-dont-need-it/", "multimedia": [{"subtype": "wide", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "height": 126, "width": 190, "legacy": {"wide": "images/2012/05/07/health/well-prevention/well-prevention-thumbWide.jpg", "wideheight": "126", "widewidth": "190"}, "type": "image"}, {"subtype": "thumbnail", "url": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "height": 75, "width": 75, "legacy": {"thumbnailheight": "75", "thumbnail": "images/2012/05/07/health/well-prevention/well-prevention-thumbStandard.jpg", "thumbnailwidth": "75"}, "type": "image"}], "pub_date": "1934-01-13T11:37:12Z"}]}'
        return '{"docs": [{"headline": " U.S. Becomes More Vulnerable to Tropical Diseases Like Zika ","image_url": "null","lead_paragraph": " A changing climate and human factors are sending viruses like Zika toward the United States. | Tropical diseases are spreading northward, to United States and elsewhere, driven by climate change; scientists say range of factors determine whether sporadic episodes of mosquito- and tick-borne illnesses will develop into epidemics. | ","printheadline": "Newly Opening Door to Tropical Diseases","pub_date": "2016-01-05","type_of_material": "News","web_url": "http://www.nytimes.com/2016/01/05/health/us-becomes-more-vulnerable-to-tropical-diseases-like-zika.html","word_count": "1162"},{"headline": " Letters to the Editor ","image_url": "null","lead_paragraph": " Readers react to articles in Science Times. | ","printheadline": "","pub_date": "2016-01-05","type_of_material": "News","web_url": "http://www.nytimes.com/2016/01/05/science/life-with-schizophrenia.html","word_count": "602"}'
'''
path = "../Crawl/jsonFiles/"
count = 0
x = []
index = Indexing()
index.delete_index()
# print(os.listdir(path))
for i in os.listdir(path):
    if (i.endswith(".json")):
        with open(path + i) as data_file:
            # if(os.stat(data_file).st_size == 0):
            #    continue
            print(data_file.name)
            data = json.load(data_file)
            index.send_file_to_Solr(data)
'''
#i = Indexing()
#i.search("health")
"""
    lem_query = lemmatization()
        queryLst = lem_query.lemmatizeWord(lem_query.removeStopWords(query.lower().split(" ")))
        synList = []
        for obj in queryLst:
            synList = wn.synsets(obj)
            for syn in synList:
                print syn

        url = "'http://localhost:8983/solr/test/select?q=%2Bheadline:*\:*Research*+%2Bkeywords:*\:*Obesity*&wt=json&rows=15'"

        conn = urlopen(query)
        rsp = simplejson.load(conn)
        print len(rsp["response"]["docs"])
        print rsp["response"]["docs"]
        return rsp["response"]["docs"]
        # print "keywords:\n"
        # for result in rsp["response"]["docs"]:
        #    print(result)

obj = Indexing()
print(obj.search("http://localhost:8983/solr/test/select?q=health&wt=json&rows=9999"))

conn = urlopen('http://localhost:8983/solr/test/select?q=keywords:*\:*Obesity*&wt=json&rows=15&fl=keywords')
url:             http://localhost:8983/solr/test/select?q=keywords:*\:*obesity*+keywords:*\:*heart*&wt=json&rows=15
# fields 'and'
conn = urlopen(
    'http://localhost:8983/solr/test/select?q=%2Bheadline:*\:*Research*+%2Bkeywords:*\:*Obesity*&wt=json&rows=15')
rsp = simplejson.load(conn)
print "headline :\n"
for result in rsp["response"]["docs"]:
    print(result)

# phrase + multi field query
conn = urlopen(
    'http://localhost:8983/solr/test/select?q=headline:*\:\"fat+stigma\"&keywords:*\:*obesity*&wt=json&rows=15')
rsp = simplejson.load(conn)
print "obesity research :\n"
for result in rsp["response"]["docs"]:
    print(result)

# Multiple phrases Query
conn = urlopen(
    'http://localhost:8983/solr/test/select?q=headline:*\:\"is+leaving\"&headline:*\:\"obesity+research\"&wt=json&rows=15')
rsp = simplejson.load(conn)
print "is leaving :\n"
for result in rsp["response"]["docs"]:
    print(result)

path = "../jsonFiles/"
count = 0
x = []
for i in os.listdir(path):
    if (i.endswith(".json")):
        with open(path + i) as data_file:
            #if(os.stat(data_file).st_size == 0):
            #    continue
            print(data_file.name)
            data = json.load(data_file)

"""
